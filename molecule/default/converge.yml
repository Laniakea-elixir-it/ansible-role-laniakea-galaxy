---
- name: Converge
  hosts: all
  gather_facts: yes

  #vars:
  #  - pulsar_server_dir: '/opt/pulsar'

  pre_tasks:
    - name: Include tasks for CentOS7
      import_tasks: pretasks_centos.yml
      when: ansible_distribution == 'CentOS'

    - name: Include tasks for RockyLinux9
      import_tasks: pretasks_rockylinux9.yml
      when: ansible_distribution == "Rocky"

    - name: Update ca-certificates
      yum:
        name: ca-certificates
        state: latest

    - name: Put SELinux in permissive mode.
      selinux:
        policy: targeted
        state: permissive

  roles:
    - role: ansible-role-laniakea-galaxy
